<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baraka Bridge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        .main-content {
            display: none;
        }
        .main-content.active {
            display: block;
        }
        .bottom-nav-item.active svg {
            color: #2563eb;
        }
        .bottom-nav-item.active span {
            color: #2563eb;
        }
        .modal {
            display: none;
        }
        .modal.active {
            display: flex;
        }
        .btn-primary {
            background-color: #2563eb;
            color: white;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #1d4ed8;
        }
        .tag {
            background-color: #e0f2fe;
            color: #0c4a6e;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-weight: 500;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app" class="max-w-4xl mx-auto md:bg-white md:shadow-lg md:rounded-lg md:mt-4">

        <!-- Header -->
        <header class="bg-white shadow-sm sticky top-0 z-10 p-4 flex justify-between items-center md:rounded-t-lg">
            <h1 class="text-2xl font-bold text-blue-600">Baraka Bridge</h1>
            <div class="flex items-center space-x-4">
                <i class="fas fa-search text-gray-600 cursor-pointer"></i>
                <i class="fas fa-bell text-gray-600 cursor-pointer"></i>
                <div id="profile-icon" class="cursor-pointer">
                    <img src="https://placehold.co/40x40/E2E8F0/4A5568?text=AU" class="w-8 h-8 rounded-full" alt="User Profile">
                </div>
            </div>
        </header>

        <main class="pb-20 md:pb-4 p-4 md:p-6">

            <!-- Home Screen -->
            <div id="home" class="main-content active">
                <div class="bg-white p-4 rounded-lg shadow mb-4">
                    <textarea class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Share an update, ask a question..."></textarea>
                    <div class="flex justify-end mt-2">
                        <button class="btn-primary px-4 py-2 rounded-lg font-semibold">Post</button>
                    </div>
                </div>

                <!-- Feed Posts -->
                <div id="feed-container">
                    <!-- Dynamic feed posts will be injected here -->
                </div>
            </div>

            <!-- The Halal Network -->
            <div id="network" class="main-content">
                <h2 class="text-xl font-bold mb-4">The Halal Network</h2>
                 <div class="mb-4">
                    <input type="text" placeholder="Search by industry, skill, country..." class="w-full p-2 border rounded-lg">
                </div>
                <div class="p-4 bg-white rounded-lg shadow">
                    <h3 class="font-bold text-lg mb-2">Bridges of Opportunity</h3>
                    <div id="network-users-container" class="space-y-4">
                        <!-- Dynamic network users will be injected here -->
                    </div>
                </div>
            </div>

            <!-- The Souk -->
            <div id="souk" class="main-content">
                <h2 class="text-xl font-bold mb-4">The Souk</h2>
                <div class="mb-4">
                     <input type="text" placeholder="Search for products or services..." class="w-full p-2 border rounded-lg">
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <!-- Dynamic souk items will be injected here -->
                </div>
            </div>

            <!-- The Salam Exchange -->
            <div id="exchange" class="main-content">
                <h2 class="text-xl font-bold mb-4">The Salam Exchange</h2>
                <div class="flex border-b mb-4">
                    <button class="tab-btn active px-4 py-2 font-semibold border-b-2 border-blue-600 text-blue-600" data-tab="jobs">Jobs</button>
                    <button class="tab-btn px-4 py-2 font-semibold text-gray-600" data-tab="gigs">Freelance Gigs</button>
                </div>
                <div id="jobs-content" class="tab-content">
                    <!-- Dynamic jobs will be injected here -->
                </div>
                <div id="gigs-content" class="tab-content hidden">
                    <!-- Dynamic gigs will be injected here -->
                </div>
            </div>

            <!-- The Majlis -->
            <div id="majlis" class="main-content">
                <h2 class="text-xl font-bold mb-4">The Majlis</h2>
                <button class="w-full btn-primary py-2 rounded-lg mb-4">+ Start a New Majlis</button>
                <div class="space-y-4">
                    <!-- Dynamic majlis topics will be injected here -->
                </div>
            </div>
            
            <!-- Falah Capital -->
            <div id="falah" class="main-content">
                <h2 class="text-xl font-bold mb-4">Falah Capital</h2>
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                    <div class="bg-white p-4 rounded-lg shadow cursor-pointer hover:bg-blue-50">
                        <i class="fas fa-handshake text-3xl text-blue-600 mb-2"></i>
                        <h3 class="font-bold">Partnerships</h3>
                        <p class="text-sm text-gray-600">Find or propose a business partnership.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow cursor-pointer hover:bg-blue-50">
                        <i class="fas fa-building text-3xl text-blue-600 mb-2"></i>
                        <h3 class="font-bold">Acquisitions</h3>
                        <p class="text-sm text-gray-600">Explore businesses for halal acquisition.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow cursor-pointer hover:bg-blue-50">
                        <i class="fas fa-chart-line text-3xl text-blue-600 mb-2"></i>
                        <h3 class="font-bold">Capital Fund</h3>
                        <p class="text-sm text-gray-600">View investment opportunities.</p>
                    </div>
                </div>
                <div class="mt-6">
                    <h3 class="font-semibold text-lg mb-2">Active Opportunities</h3>
                    <div class="bg-white p-4 rounded-lg shadow space-y-3">
                         <!-- Dynamic Falah opportunities will be injected here -->
                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profile" class="main-content">
                 <!-- Profile content will be dynamically generated -->
            </div>

        </main>

        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-t border-t max-w-4xl mx-auto md:rounded-b-lg">
            <div class="flex justify-around">
                <a href="#" class="bottom-nav-item flex-1 text-center py-2 text-gray-600 active" data-target="home">
                    <i class="fas fa-home text-xl"></i><span class="block text-xs">Home</span>
                </a>
                <a href="#" class="bottom-nav-item flex-1 text-center py-2 text-gray-600" data-target="network">
                    <i class="fas fa-users text-xl"></i><span class="block text-xs">Network</span>
                </a>
                <a href="#" class="bottom-nav-item flex-1 text-center py-2 text-gray-600" data-target="souk">
                    <i class="fas fa-store text-xl"></i><span class="block text-xs">Souk</span>
                </a>
                <a href="#" class="bottom-nav-item flex-1 text-center py-2 text-gray-600" data-target="exchange">
                    <i class="fas fa-briefcase text-xl"></i><span class="block text-xs">Exchange</span>
                </a>
                <a href="#" class="bottom-nav-item flex-1 text-center py-2 text-gray-600" data-target="majlis">
                    <i class="fas fa-comments text-xl"></i><span class="block text-xs">Majlis</span>
                </a>
                 <a href="#" class="bottom-nav-item flex-1 text-center py-2 text-gray-600" data-target="falah">
                    <i class="fas fa-seedling text-xl"></i><span class="block text-xs">Falah</span>
                </a>
            </div>
        </nav>

        <!-- Modals -->
        <div id="bridge-modal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h3 class="text-lg font-bold mb-4">Build a Bridge with <span id="modal-username"></span></h3>
                <p class="mb-4">Please choose your intention for connecting.</p>
                <select id="bridge-intention" class="w-full border rounded-lg p-2 mb-4">
                    <option>Job Opportunity</option>
                    <option>Community Collaboration</option>
                    <option>Business Partnership</option>
                    <option>Mentorship</option>
                </select>
                <div class="flex justify-end space-x-2">
                    <button id="cancel-bridge" class="px-4 py-2 bg-gray-200 rounded-lg">Cancel</button>
                    <button id="send-bridge-request" class="btn-primary px-4 py-2 rounded-lg">Send Request</button>
                </div>
            </div>
        </div>
        
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // --- MOCK DATABASE ---
    const db = {
        users: [
            { id: 1, name: 'Fatima Al-Fihri', title: 'Halal Tech Entrepreneur', location: 'Malaysia', halalFocus: 'FinTech', verified: true, avatar: 'https://placehold.co/80x80/93C5FD/FFFFFF?text=FA' },
            { id: 2, name: 'Yusuf Ahmed', title: 'Islamic Art Designer', location: 'UK', halalFocus: 'Creative Arts', verified: false, avatar: 'https://placehold.co/80x80/A5B4FC/FFFFFF?text=YA' },
            { id: 3, name: 'Aisha Khan', title: 'Shariah-compliant Marketing', location: 'USA', halalFocus: 'Digital Marketing', verified: true, avatar: 'https://placehold.co/80x80/FDBA74/FFFFFF?text=AK' },
            { id: 4, name: 'Omar Abdullah', title: 'Halal Food Supplier', location: 'UAE', halalFocus: 'E-commerce, B2B', verified: true, avatar: 'https://placehold.co/80x80/86EFAC/FFFFFF?text=OA' },
        ],
        posts: [
            { userId: 3, content: "Alhamdulillah, just launched a new marketing campaign for a client in the modest fashion industry. It's a blessing to align work with our values. #HalalMarketing", likes: 25, comments: 4 },
            { userId: 1, content: "Exciting news! Our Halal FinTech startup just secured a new round of funding. Looking to expand our team. Check out the Salam Exchange for openings! #FinTech #Baraka", likes: 58, comments: 12 },
            { userId: 4, content: "Looking for reliable organic honey suppliers from Turkey. If you have any connections, please build a bridge! JazakAllah Khair.", likes: 15, comments: 7 },
        ],
        souk: [
            { id: 1, name: 'Handmade Prayer Beads', seller: 'Yusuf Ahmed', price: 25.00, image: 'https://placehold.co/300x300/A5B4FC/FFFFFF?text=Tasbih' },
            { id: 2, name: 'Organic Medina Dates (1kg)', seller: 'Omar Abdullah', price: 40.00, image: 'https://placehold.co/300x300/86EFAC/FFFFFF?text=Dates' },
            { id: 3, name: 'Islamic Calligraphy Art', seller: 'Yusuf Ahmed', price: 150.00, image: 'https://placehold.co/300x300/A5B4FC/FFFFFF?text=Art' },
            { id: 4, name: 'Modest Wear Abaya', seller: 'Aisha Khan', price: 75.00, image: 'https://placehold.co/300x300/FDBA74/FFFFFF?text=Abaya' }
        ],
        jobs: [
            { id: 1, title: 'Senior Flutter Developer', company: 'Halal FinTech Inc.', location: 'Remote', type: 'Full-time', verified: true },
            { id: 2, title: 'Content Writer (Islamic Topics)', company: 'Hikmah Media', location: 'UK', type: 'Part-time', verified: true },
            { id: 3, title: 'Customer Support Specialist', company: 'MuslimCharity Org', location: 'USA', type: 'Full-time', verified: false },
        ],
        gigs: [
            { id: 1, title: 'Logo Design for a Dawah Channel', budget: 200, skills: ['Graphic Design', 'Branding'] },
            { id: 2, title: 'Translate a 5-page document (Arabic to English)', budget: 100, skills: ['Translation', 'Arabic'] },
            { id: 3, title: 'Halal Marketing Strategy Consultation', budget: 500, skills: ['Marketing', 'Strategy'] },
        ],
        majlis: [
            { id: 1, topic: 'Fiqh of Business: Navigating Modern Challenges', author: 'Sheikh Abdullah', replies: 45, participants: 120, scholar: true },
            { id: 2, topic: 'Mental Resilience for Muslim Entrepreneurs', author: 'Aisha Khan', replies: 78, participants: 250, scholar: false },
            { id: 3, topic: 'How to build a Barakah-driven brand?', author: 'Fatima Al-Fihri', replies: 62, participants: 180, scholar: false },
        ],
        falah: [
            { id: 1, title: 'Seeking Partnership for Halal Food Delivery App', type: 'Partnership', industry: 'Food Tech' },
            { id: 2, title: 'Modest Fashion Brand for Acquisition', type: 'Acquisition', industry: 'E-commerce' },
            { id: 3, title: 'Investment Opportunity in Ethical Agriculture Project', type: 'Capital Fund', industry: 'Agriculture' },
        ]
    };
    
    // --- RENDER FUNCTIONS ---
    function getUserById(id) {
        return db.users.find(u => u.id === id);
    }

    function renderFeed() {
        const container = document.getElementById('feed-container');
        container.innerHTML = db.posts.map(post => {
            const user = getUserById(post.userId);
            return `
                <div class="bg-white p-4 rounded-lg shadow mb-4">
                    <div class="flex items-center mb-2">
                        <img src="${user.avatar}" class="w-10 h-10 rounded-full mr-3" alt="${user.name}">
                        <div>
                            <p class="font-bold">${user.name}</p>
                            <p class="text-sm text-gray-500">${user.title}</p>
                        </div>
                    </div>
                    <p class="text-gray-800">${post.content}</p>
                    <div class="flex justify-between items-center mt-4 text-gray-500">
                        <div><i class="far fa-heart mr-1"></i> ${post.likes}</div>
                        <div><i class="far fa-comment mr-1"></i> ${post.comments}</div>
                        <div><i class="fas fa-share mr-1"></i> Share</div>
                    </div>
                </div>
            `;
        }).join('');
    }

    function renderNetworkUsers() {
        const container = document.getElementById('network-users-container');
        container.innerHTML = db.users.map(user => `
            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div class="flex items-center">
                    <img src="${user.avatar}" class="w-12 h-12 rounded-full mr-4" alt="${user.name}">
                    <div>
                        <p class="font-bold">${user.name} ${user.verified ? '<i class="fas fa-check-circle text-blue-500 text-xs"></i>' : ''}</p>
                        <p class="text-sm text-gray-600">${user.title}</p>
                        <p class="text-xs text-gray-500">${user.location}</p>
                    </div>
                </div>
                <button class="build-bridge-btn btn-primary px-3 py-1 rounded-full text-sm font-semibold" data-user-id="${user.id}" data-user-name="${user.name}">
                    Build a Bridge
                </button>
            </div>
        `).join('');
    }

    function renderSoukItems() {
        const container = document.querySelector('#souk .grid');
        container.innerHTML = db.souk.map(item => `
            <div class="bg-white rounded-lg shadow overflow-hidden">
                <img src="${item.image}" class="w-full h-40 object-cover" alt="${item.name}">
                <div class="p-4">
                    <h4 class="font-bold truncate">${item.name}</h4>
                    <p class="text-sm text-gray-600">by ${item.seller}</p>
                    <div class="flex justify-between items-center mt-2">
                        <span class="font-bold text-lg text-blue-600">$${item.price.toFixed(2)}</span>
                         <button class="bg-green-500 text-white px-3 py-1 rounded-full text-sm hover:bg-green-600">Buy</button>
                    </div>
                     <button class="w-full mt-2 text-sm bg-yellow-400 text-yellow-900 py-1 rounded-full hover:bg-yellow-500">
                        <i class="fas fa-hand-holding-heart"></i> Barakah Purchase
                     </button>
                </div>
            </div>
        `).join('');
    }

    function renderJobs() {
        const container = document.getElementById('jobs-content');
        container.innerHTML = db.jobs.map(job => `
            <div class="bg-white p-4 rounded-lg shadow mb-3">
                <div class="flex justify-between items-start">
                    <div>
                        <h4 class="font-bold text-lg">${job.title}</h4>
                        <p class="text-gray-700">${job.company} ${job.verified ? '<i class="fas fa-check-circle text-blue-500 text-xs" title="Verified Halal Employer"></i>' : ''}</p>
                        <p class="text-sm text-gray-500">${job.location} â€¢ ${job.type}</p>
                    </div>
                    <button class="btn-primary px-4 py-2 rounded-lg text-sm">Apply</button>
                </div>
                <div class="mt-2 pt-2 border-t">
                     <p class="text-xs text-green-700"><i class="fas fa-mosque"></i> Prayer-friendly workplace</p>
                </div>
            </div>
        `).join('');
    }
    
    function renderGigs() {
        const container = document.getElementById('gigs-content');
        container.innerHTML = db.gigs.map(gig => `
            <div class="bg-white p-4 rounded-lg shadow mb-3">
                 <div class="flex justify-between items-start">
                     <div>
                         <h4 class="font-bold text-lg">${gig.title}</h4>
                         <div class="flex flex-wrap gap-2 mt-2">
                            ${gig.skills.map(skill => `<span class="tag">${skill}</span>`).join('')}
                         </div>
                     </div>
                     <div class="text-right">
                         <p class="font-bold text-lg text-green-600">$${gig.budget}</p>
                         <button class="btn-primary px-4 py-2 rounded-lg text-sm mt-2">Submit Proposal</button>
                     </div>
                 </div>
            </div>
        `).join('');
    }

    function renderMajlisTopics() {
        const container = document.querySelector('#majlis .space-y-4');
        container.innerHTML = db.majlis.map(topic => `
            <div class="bg-white p-4 rounded-lg shadow">
                <h4 class="font-bold">${topic.topic}</h4>
                <p class="text-sm text-gray-600">Started by: ${topic.author} ${topic.scholar ? '<span class="text-xs font-semibold bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full ml-1">Verified Scholar</span>' : ''}</p>
                <div class="flex justify-between items-center mt-2 text-sm text-gray-500">
                    <span>${topic.replies} Replies</span>
                    <span>${topic.participants} Participants</span>
                    <a href="#" class="font-semibold text-blue-600">Join Discussion</a>
                </div>
            </div>
        `).join('');
    }
    
    function renderFalahOpportunities() {
        const container = document.querySelector('#falah .space-y-3');
        container.innerHTML = db.falah.map(opp => `
             <div class="border p-3 rounded-lg flex justify-between items-center">
                <div>
                    <span class="tag">${opp.type}</span>
                    <p class="font-semibold mt-1">${opp.title}</p>
                    <p class="text-sm text-gray-500">${opp.industry}</p>
                </div>
                <button class="text-blue-600 font-semibold text-sm">Explore</button>
            </div>
        `).join('');
    }

    function renderProfilePage() {
        const container = document.getElementById('profile');
        const user = db.users[0]; // Displaying first user as example
        container.innerHTML = `
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex flex-col items-center">
                    <img src="${user.avatar}" class="w-24 h-24 rounded-full mb-4 border-4 border-blue-500" alt="${user.name}">
                    <h2 class="text-2xl font-bold">${user.name} ${user.verified ? '<i class="fas fa-check-circle text-blue-500"></i>' : ''}</h2>
                    <p class="text-gray-600">${user.title}</p>
                    <p class="text-sm text-gray-500 mt-1">${user.location}</p>
                </div>
                <div class="mt-6 border-t pt-4">
                    <h3 class="font-bold text-lg">Halal Focus</h3>
                    <p>${user.halalFocus}</p>
                </div>
                <div class="mt-4">
                     <h3 class="font-bold text-lg">Bio</h3>
                     <p>Passionate entrepreneur dedicated to building ethical and impactful technology solutions for the Ummah. Founder of a leading Halal FinTech platform.</p>
                </div>
                 <div class="mt-4">
                     <h3 class="font-bold text-lg">My Shop</h3>
                     <p class="text-sm text-gray-500">This user does not have any products listed yet.</p>
                </div>
                 <div class="mt-4">
                     <h3 class="font-bold text-lg">My Majlis Discussions</h3>
                     <p class="text-sm text-gray-500">This user has not started any discussions.</p>
                </div>
            </div>
        `;
    }

    // --- NAVIGATION LOGIC ---
    const navItems = document.querySelectorAll('.bottom-nav-item');
    const mainContents = document.querySelectorAll('.main-content');

    function switchTab(targetId) {
        mainContents.forEach(content => {
            content.classList.remove('active');
        });
        navItems.forEach(item => {
            item.classList.remove('active');
        });

        document.getElementById(targetId).classList.add('active');
        document.querySelector(`.bottom-nav-item[data-target="${targetId}"]`)?.classList.add('active');
        window.scrollTo(0, 0); // Scroll to top on tab change
    }

    navItems.forEach(item => {
        item.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = e.currentTarget.dataset.target;
            switchTab(targetId);
        });
    });

    document.getElementById('profile-icon').addEventListener('click', () => {
        switchTab('profile');
    });

    // Exchange Tabs
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            tabBtns.forEach(b => b.classList.remove('active', 'border-blue-600', 'text-blue-600'));
            btn.classList.add('active', 'border-blue-600', 'text-blue-600');

            tabContents.forEach(content => content.classList.add('hidden'));
            if(btn.dataset.tab === 'jobs') {
                document.getElementById('jobs-content').classList.remove('hidden');
            } else {
                document.getElementById('gigs-content').classList.remove('hidden');
            }
        });
    });

    // --- MODAL LOGIC ---
    const bridgeModal = document.getElementById('bridge-modal');
    const modalUsername = document.getElementById('modal-username');
    const cancelBridgeBtn = document.getElementById('cancel-bridge');
    const sendBridgeRequestBtn = document.getElementById('send-bridge-request');
    let currentBridgeUserId = null;

    document.body.addEventListener('click', function(e) {
        if (e.target.classList.contains('build-bridge-btn')) {
            currentBridgeUserId = e.target.dataset.userId;
            modalUsername.textContent = e.target.dataset.userName;
            bridgeModal.classList.add('active');
        }
    });

    function closeModal() {
        bridgeModal.classList.remove('active');
    }

    cancelBridgeBtn.addEventListener('click', closeModal);
    sendBridgeRequestBtn.addEventListener('click', () => {
        const intention = document.getElementById('bridge-intention').value;
        console.log(`Sending bridge request to user ${currentBridgeUserId} with intention: ${intention}`);
        alert('Bridge request sent! (Check console for details)');
        closeModal();
    });
    
    // --- INITIAL RENDER ---
    function initializeApp() {
        renderFeed();
        renderNetworkUsers();
        renderSoukItems();
        renderJobs();
        renderGigs();
        renderMajlisTopics();
        renderFalahOpportunities();
        renderProfilePage();
    }

    initializeApp();
});
</script>

</body>
</html>
